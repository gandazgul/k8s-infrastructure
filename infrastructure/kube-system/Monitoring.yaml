---
apiVersion: v1
kind: Namespace
metadata:
  labels:
    pod-security.kubernetes.io/warn: privileged
    pod-security.kubernetes.io/warn-version: latest
  name: monitoring
---
kind: Kustomization
apiVersion: kustomize.toolkit.fluxcd.io/v1
metadata:
  name: crds
  namespace: monitoring
spec:
  interval: 1h
  path: ./infrastructure/kube-prometheus/setup/
  prune: true
  sourceRef:
    kind: GitRepository
    name: k8s-infrastructure
    namespace: kube-system
---
Kind: Kustomization
apiVersion: kustomize.toolkit.fluxcd.io/v1
metadata:
  name: kube-prometheus
  namespace: monitoring
spec:
  interval: 1h
  path: ./infrastructure/kube-prometheus/
  prune: true
  dependsOn:
    - name: crds
  sourceRef:
    kind: GitRepository
    name: k8s-infrastructure
    namespace: kube-system
