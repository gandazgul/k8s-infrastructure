# samba

Chart to deploy a simple Samba server on K8s available on hostNetwork or just inside the cluster

![Version: 0.2.2](https://img.shields.io/badge/Version-0.2.2-informational?style=flat-square)

## Volumes

This container will mount any number of volumes you configure to it. You can mount /etc/samba to override its config,
if you want to use the default's or don't want to deal with configs then read the container's author's README @ https://github.com/dperson/samba.

## Users and Passwords

To get a smbpasswd file run this on your current samba installation:
`sudo pdbedit -Lw`

If you need to install samba on a linux vm/machine and run `pdbedit --create -u testuser` it will ask you for a
password and add it to the DB, then you can run the command above to export it in smbpasswd format

To import this file, put it alongside your config (or somewhere else that will be mounted on the container) and set this environment variable:
env:
- name: IMPORT
value: "/etc/samba/smbpasswd"

## Access

hostNetwork is set to true by default this will make samba available on the node where its running. (Perhaps I should allow affinity to be set as well)

You can also turn this off and samba then will only be available within the cluster to other pods.

## Example config:

```
[global]
workgroup = WORKGROUP
os level = 20
load printers = no
disable spoolss = yes
unix password sync = no
mangled names = no

[ShareName]
writeable = yes
force directory mode = 775
directory mode = 775
force group = [group here]
force user = root
delete readonly = yes
path = /shared/path/to/folder
force create mode = 664
create mode = 664
available = yes
browsable = yes
public = yes

[HomeFolder]
force user = testuser
force group = testuser
writeable = yes
create mode = 664
directory mode = 775
path = /shared/testuser
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| env | list | `[]` |  |
| hostNetwork | bool | `true` |  |
| image.pullPolicy | string | `"Always"` |  |
| image.repository | string | `"dperson/samba"` |  |
| image.tag | string | `"latest"` |  |
| nodeSelector | object | `{}` |  |
| replicaCount | int | `1` |  |
| resources | object | `{}` |  |
| service.externalNMBPort137 | int | `137` |  |
| service.externalNMBPort138 | int | `138` |  |
| service.externalSMBPort139 | int | `139` |  |
| service.externalSMBPort445 | int | `445` |  |
| service.internalNMBPort137 | int | `137` |  |
| service.internalNMBPort138 | int | `138` |  |
| service.internalSMBPort139 | int | `139` |  |
| service.internalSMBPort445 | int | `445` |  |
| service.name | string | `"samba"` |  |
| service.type | string | `"ClusterIP"` |  |
| volumeMounts | list | `[]` |  |
| volumes | list | `[]` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
