# Cert Manager ====================================================================
# Automates getting TLS certs from local CA or Letsencrypt

# NOTE: cli args take precedence over these
helmDefaults:
  wait: true
  timeout: 600
  recreatePods: true
  force: true

releases:
  - name: k8s-dashboard
    namespace: kube-system
    chart: stable/kubernetes-dashboard
    values:
      - rbac:
          # without this the dashboard doesnt have access to anything
          clusterAdminRole: true
      - enableInsecureLogin: true
      - ingress:
          enabled: true
          hosts:
            - dashboard.k8s.sytes.net
          tls:
            - hosts:
                - dashboard.k8s.sytes.net
              secretName: dashboard-k8s-cert
          annotations:
            kubernetes.io/ingress.class: "nginx"
            certmanager.k8s.io/cluster-issuer: "ca-issuer"
