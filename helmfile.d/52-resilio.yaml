# Resilio Sync ===========================================================

# NOTE: cli args take precedence over these
helmDefaults:
  wait: true
  timeout: 600
  #recreatePods: true
  force: true

releases:
  - name: resilio
    namespace: services
    chart: ../charts/resilio
    values:
    - volumes:
        - name: yasr-volume
          persistentVolumeClaim:
            claimName: yasr-volume
        - name: main-volume
          persistentVolumeClaim:
            claimName: main-volume
    - volumeMounts:
      - name: yasr-volume
        mountPath: "/mnt/sync"
        subPath: "configs/resilio"
      - name: main-volume
        mountPath: "/mnt/mounted_folders/"
        subPath: "btsync"
    - ingress:
        enabled: true
        hosts:
          - resilio.{{ requiredEnv "MASTER_NODE_NAME" }}
        tls:
          - hosts:
              - resilio.{{ requiredEnv "MASTER_NODE_NAME" }}
            secretName: resilio-k8s-cert
        annotations:
          kubernetes.io/ingress.class: "nginx"
          certmanager.k8s.io/cluster-issuer: "ca-issuer"
